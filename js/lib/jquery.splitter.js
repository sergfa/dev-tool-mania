!function(t,i){var e=0,n=null,r=[],o=null;t.fn.split=function(s){function l(t){if("number"==typeof t)return t;if("string"==typeof t){var i=t.match(/^([0-9\.]+)(px|%)$/);if(i){if("px"==i[2])return+i[1];if("vertical"==u.orientation)return c*+i[1]/100;if("horizontal"==u.orientation)return f*+i[1]/100}}}var a=this.data("splitter");if(a)return a;var h,p,u=t.extend({limit:100,orientation:"horizontal",position:"50%",invisible:!1,onDragStart:t.noop,onDragEnd:t.noop,onDrag:t.noop},s||{});this.settings=u;var d,g=this.children();"vertical"==u.orientation?(h=g.first().addClass("left_panel"),p=h.next().addClass("right_panel"),d="vsplitter"):"horizontal"==u.orientation&&(h=g.first().addClass("top_panel"),p=h.next().addClass("bottom_panel"),d="hsplitter"),u.invisible&&(d+=" splitter-invisible");var c=this.width(),f=this.height(),v=e++;this.addClass("splitter_panel");var m,b=t("<div/>").addClass(d).bind("mouseenter touchstart",function(){n=v}).bind("mouseleave touchend",function(){n=null}).insertAfter(h),z=t.extend(this,{refresh:function(){var t=this.width(),i=this.height();c==t&&f==i||(c=this.width(),f=this.height(),z.position(m))},position:function(){return"vertical"==u.orientation?function(t,e){if(t===i)return m;m=l(t);var n,r=b.width(),o=r/2;return u.invisible?(n=h.width(m).outerWidth(),p.width(z.width()-n),b.css("left",n-o)):(n=h.width(m-o).outerWidth(),p.width(z.width()-n-r),b.css("left",n)),h.find(".splitter_panel").eq(0).height(z.height()),p.find(".splitter_panel").eq(0).height(z.height()),e||(z.trigger("splitter.resize"),z.find(".splitter_panel").trigger("splitter.resize")),z}:"horizontal"==u.orientation?function(t,e){if(t===i)return m;m=l(t);var n,r=b.height(),o=r/2;return u.invisible?(n=h.height(m).outerHeight(),p.height(z.height()-n),b.css("top",n-o)):(n=h.height(m-o).outerHeight(),p.height(z.height()-n-r),b.css("top",n)),e||(z.trigger("splitter.resize"),z.find(".splitter_panel").trigger("splitter.resize")),z}:t.noop}(),orientation:u.orientation,limit:u.limit,isActive:function(){return n===v},destroy:function(){z.removeClass("splitter_panel"),b.unbind("mouseenter"),b.unbind("mouseleave"),b.unbind("touchstart"),b.unbind("touchmove"),b.unbind("touchend"),b.unbind("touchleave"),b.unbind("touchcancel"),"vertical"==u.orientation?(h.removeClass("left_panel"),p.removeClass("right_panel")):"horizontal"==u.orientation&&(h.removeClass("top_panel"),p.removeClass("bottom_panel")),z.unbind("splitter.resize"),z.trigger("splitter.resize"),z.find(".splitter_panel").trigger("splitter.resize"),r[v]=null,e--,b.remove(),z.removeData("splitter");for(var i=!1,n=r.length;n--;)if(null!==r[n]){i=!0;break}i||(t(document.documentElement).unbind(".splitter"),t(window).unbind("resize.splitter"),r=[],e=0)}});z.bind("splitter.resize",function(t){var i=z.position();"vertical"==z.orientation&&i>z.width()?i=z.width()-z.limit-1:"horizontal"==z.orientation&&i>z.height()&&(i=z.height()-z.limit-1),i<z.limit&&(i=z.limit+1),t.stopPropagation(),z.position(i,!0)});var w;"vertical"==u.orientation?w=w>c-u.limit?c-u.limit:l(u.position):"horizontal"==u.orientation&&(w=w>f-u.limit?f-u.limit:l(u.position)),w<u.limit&&(w=u.limit),z.position(w,!0);var _=this.closest(".splitter_panel");return _.length&&this.height(_.height()),0===r.filter(Boolean).length&&(t(window).bind("resize.splitter",function(){t.each(r,function(t,i){i&&i.refresh()})}),t(document.documentElement).on("mousedown.splitter touchstart.splitter",function(i){null!==n&&(i.preventDefault(),o=r[n],setTimeout(function(){t('<div class="splitterMask"></div>').css("cursor",o.children().eq(1).css("cursor")).insertAfter(o)}),o.settings.onDragStart(i))}).bind("mouseup.splitter touchend.splitter touchleave.splitter touchcancel.splitter",function(i){o&&(setTimeout(function(){t(".splitterMask").remove()}),o.settings.onDragEnd(i),o=null)}).bind("mousemove.splitter touchmove.splitter",function(t){if(null!==o){var i=o.limit,e=o.offset();if("vertical"==o.orientation){var n=t.pageX;t.originalEvent&&t.originalEvent.changedTouches&&(n=t.originalEvent.changedTouches[0].pageX);var r=n-e.left;r<=o.limit?r=o.limit+1:r>=o.width()-i&&(r=o.width()-i-1),r>o.limit&&r<o.width()-i&&(o.position(r,!0),o.trigger("splitter.resize"),o.find(".splitter_panel").trigger("splitter.resize"))}else if("horizontal"==o.orientation){var s=t.pageY;t.originalEvent&&t.originalEvent.changedTouches&&(s=t.originalEvent.changedTouches[0].pageY);var l=s-e.top;l<=o.limit?l=o.limit+1:l>=o.height()-i&&(l=o.height()-i-1),l>o.limit&&l<o.height()-i&&(o.position(l,!0),o.trigger("splitter.resize"),o.find(".splitter_panel").trigger("splitter.resize"))}o.settings.onDrag(t)}})),r[v]=z,z.data("splitter",z),z}}(jQuery);